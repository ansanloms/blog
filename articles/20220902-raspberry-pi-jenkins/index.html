<!DOCTYPE html>
<html lang="ja"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Raspberry Pi 4 (Ubuntu Server) に Jenkins をインストールしました</title><link rel="stylesheet" href="/blog/styles/palette.css"><link rel="stylesheet" href="/blog/styles/general.css"><link rel="stylesheet" href="/blog/styles/layout.css"><link rel="stylesheet" href="/blog/styles/top.css"><link rel="stylesheet" href="/blog/styles/article.css"></head><body><div class="container"><div class="content"><ul class="meta"><li class="item"><span class="label">Created at</span><span class="value">2022-09-01</span></li></ul><article class="article"><div><h1 id="raspberry-pi-4-ubuntu-server-に-jenkins-をインストールしました"><a href="#raspberry-pi-4-ubuntu-server-に-jenkins-をインストールしました">Raspberry Pi 4 (Ubuntu Server) に Jenkins をインストールしました</a></h1>
<h2 id="java-のインストール"><a href="#java-のインストール">Java のインストール</a></h2>
<pre class="shiki shiki-themes nord nord" style="background-color:#2e3440ff;--shiki-light-bg:#2e3440ff;color:#d8dee9ff;--shiki-light:#d8dee9ff" tabindex="0"><code class="language-bash"><span class="line"><span style="color:#88C0D0;--shiki-light:#88C0D0">sudo</span><span style="color:#A3BE8C;--shiki-light:#A3BE8C"> apt</span><span style="color:#A3BE8C;--shiki-light:#A3BE8C"> install</span><span style="color:#A3BE8C;--shiki-light:#A3BE8C"> default-jdk</span></span></code></pre>
<h2 id="jenkins-のインストール"><a href="#jenkins-のインストール">Jenkins のインストール</a></h2>
<p><a href="https://www.jenkins.io/doc/book/installing/linux/#debianubuntu">https://www.jenkins.io/doc/book/installing/linux/#debianubuntu</a></p>
<p>毎週リリース版でやっていきます。</p>
<pre class="shiki shiki-themes nord nord" style="background-color:#2e3440ff;--shiki-light-bg:#2e3440ff;color:#d8dee9ff;--shiki-light:#d8dee9ff" tabindex="0"><code class="language-bash"><span class="line"><span style="color:#88C0D0;--shiki-light:#88C0D0">curl</span><span style="color:#A3BE8C;--shiki-light:#A3BE8C"> -fsSL</span><span style="color:#A3BE8C;--shiki-light:#A3BE8C"> https://pkg.jenkins.io/debian/jenkins.io.key</span><span style="color:#81A1C1;--shiki-light:#81A1C1"> |</span><span style="color:#88C0D0;--shiki-light:#88C0D0"> sudo</span><span style="color:#A3BE8C;--shiki-light:#A3BE8C"> tee</span><span style="color:#EBCB8B;--shiki-light:#EBCB8B"> \</span></span>
<span class="line"><span style="color:#A3BE8C;--shiki-light:#A3BE8C">  /usr/share/keyrings/jenkins-keyring.asc</span><span style="color:#81A1C1;--shiki-light:#81A1C1"> &gt;</span><span style="color:#A3BE8C;--shiki-light:#A3BE8C"> /dev/null</span></span>
<span class="line"><span style="color:#88C0D0;--shiki-light:#88C0D0">echo</span><span style="color:#A3BE8C;--shiki-light:#A3BE8C"> deb</span><span style="color:#D8DEE9FF;--shiki-light:#D8DEE9FF"> [signed-by=/usr/share/keyrings/jenkins-keyring.asc] </span><span style="color:#EBCB8B;--shiki-light:#EBCB8B">\</span></span>
<span class="line"><span style="color:#88C0D0;--shiki-light:#88C0D0">  https://pkg.jenkins.io/debian</span><span style="color:#A3BE8C;--shiki-light:#A3BE8C"> binary/</span><span style="color:#81A1C1;--shiki-light:#81A1C1"> |</span><span style="color:#88C0D0;--shiki-light:#88C0D0"> sudo</span><span style="color:#A3BE8C;--shiki-light:#A3BE8C"> tee</span><span style="color:#EBCB8B;--shiki-light:#EBCB8B"> \</span></span>
<span class="line"><span style="color:#A3BE8C;--shiki-light:#A3BE8C">  /etc/apt/sources.list.d/jenkins.list</span><span style="color:#81A1C1;--shiki-light:#81A1C1"> &gt;</span><span style="color:#A3BE8C;--shiki-light:#A3BE8C"> /dev/null</span></span>
<span class="line"><span style="color:#88C0D0;--shiki-light:#88C0D0">sudo</span><span style="color:#A3BE8C;--shiki-light:#A3BE8C"> apt</span><span style="color:#A3BE8C;--shiki-light:#A3BE8C"> update</span></span>
<span class="line"><span style="color:#88C0D0;--shiki-light:#88C0D0">sudo</span><span style="color:#A3BE8C;--shiki-light:#A3BE8C"> apt</span><span style="color:#A3BE8C;--shiki-light:#A3BE8C"> install</span><span style="color:#A3BE8C;--shiki-light:#A3BE8C"> jenkins</span></span></code></pre>
<h2 id="実行ユーザの変更"><a href="#実行ユーザの変更">実行ユーザの変更</a></h2>
<p>関連するファイルやディレクトリの権限を変更します。</p>
<pre class="shiki shiki-themes nord nord" style="background-color:#2e3440ff;--shiki-light-bg:#2e3440ff;color:#d8dee9ff;--shiki-light:#d8dee9ff" tabindex="0"><code class="language-bash"><span class="line"><span style="color:#88C0D0;--shiki-light:#88C0D0">sudo</span><span style="color:#A3BE8C;--shiki-light:#A3BE8C"> chown</span><span style="color:#A3BE8C;--shiki-light:#A3BE8C"> -R</span><span style="color:#A3BE8C;--shiki-light:#A3BE8C"> ansanloms:ansanloms</span><span style="color:#A3BE8C;--shiki-light:#A3BE8C"> /var/lib/jenkins</span><span style="color:#A3BE8C;--shiki-light:#A3BE8C"> /var/log/jenkins</span><span style="color:#A3BE8C;--shiki-light:#A3BE8C"> /var/cache/jenkins</span></span></code></pre>
<p>systemctl での実行ユーザを変更します。</p>
<pre class="shiki shiki-themes nord nord" style="background-color:#2e3440ff;--shiki-light-bg:#2e3440ff;color:#d8dee9ff;--shiki-light:#d8dee9ff" tabindex="0"><code class="language-bash"><span class="line"><span style="color:#88C0D0;--shiki-light:#88C0D0">sudo</span><span style="color:#A3BE8C;--shiki-light:#A3BE8C"> vim</span><span style="color:#A3BE8C;--shiki-light:#A3BE8C"> /lib/systemd/system/jenkins.service</span></span></code></pre>
<p><code>User</code> / <code>Group</code> を変更します。</p>
<pre><code class="language-ini:/lib/systemd/system/jenkins.service">User=ansanloms
Group=ansanloms
</code></pre>
<p>リロードし、起動します。</p>
<pre class="shiki shiki-themes nord nord" style="background-color:#2e3440ff;--shiki-light-bg:#2e3440ff;color:#d8dee9ff;--shiki-light:#d8dee9ff" tabindex="0"><code class="language-bash"><span class="line"><span style="color:#88C0D0;--shiki-light:#88C0D0">sudo</span><span style="color:#A3BE8C;--shiki-light:#A3BE8C"> systemctl</span><span style="color:#A3BE8C;--shiki-light:#A3BE8C"> daemon-reload</span></span>
<span class="line"><span style="color:#88C0D0;--shiki-light:#88C0D0">sudo</span><span style="color:#A3BE8C;--shiki-light:#A3BE8C"> systemctl</span><span style="color:#A3BE8C;--shiki-light:#A3BE8C"> start</span><span style="color:#A3BE8C;--shiki-light:#A3BE8C"> jenkins.service</span></span></code></pre></div></article></div></div></body></html>