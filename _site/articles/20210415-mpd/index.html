<!DOCTYPE html>
<html lang="ja"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Music Player Daemon を導入しました</title><script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ress@5.0.2/dist/ress.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100;300;400;500;700;900&amp;display=swap"><link rel="stylesheet" href="/styles/main.css"><link rel="stylesheet" href="/styles/article.css"></head><body><header><a href="/">ansanloms blog</a></header><div class="container"><article class="article"><h1>Music Player Daemon を導入しました</h1><div><p>PC で音楽をきいています。</p>
<p>いままでは <a href="https://www.foobar2000.org/">foobar2000</a> をつかっていたのですが、なんとなく CLI
でやっていきをしたいとおもったので <a href="https://www.musicpd.org/">mpd</a> と
<a href="https://www.musicpd.org/clients/mpc/">mpc</a> を導入することにしました。</p>
<h2>環境</h2>
<p>Windows 10 Pro 64bit です。</p>
<h2>mpd のインストール</h2>
<p><a href="https://www.musicpd.org/download/win32/">Windows のバイナリが配布されている</a>ので、これをそのまま使用しました。ついでに、<a href="https://github.com/ansanloms/scoop-ansanloms/blob/master/bucket/mpd.json">scoop でインストールできるように</a>しました。</p>
<h2>mpd の設定</h2>
<p><code>%LOCALAPPDATA%\mpd\mpd.conf</code> に配置します。</p>
<pre class="language-none" tabindex="0"><code class="language-conf:mpd.conf language-none"># ファイルの場所
music_directory     "G:/music/library"

# プレイリストの場所
playlist_directory  "G:/music/mpd/playlists"

# データベースの場所
db_file             "G:/music/mpd/mpd.db"

# ログの場所
log_file            "C:/logs/mpd/mpd.log"
</code></pre>
<p>とりあえず起動することを確認しました。</p>
<h2>mpc の設定</h2>
<p>mpc は Windows
のバイナリを配布していないので、<a href="https://github.com/MusicPlayerDaemon/mpc">ソースコードからビルド</a>してみました。ただマルチバイト文字が化けてしまいました。</p>
<p>Windows 上で mpc を用意するのは諦めて wsl (Ubutu)上に mpc をインストールすることにしました。</p>
<pre class="language-none" tabindex="0"><code class="language-none">sudo apt-get install mpc
</code></pre>
<p>Windows 上から使用しても問題なさそうです。</p>
<pre class="language-none" tabindex="0"><code class="language-none">❯ wsl mpc list album | grep 日本合唱曲全集
日本合唱曲全集 41「嫁ぐ娘に」三善晃作品集 1
日本合唱曲全集 42「縄文連祷」三善晃作品集 2
日本合唱曲全集 43「三つの抒情」三善晃作品集 3
日本合唱曲全集 44「クレーの絵本」三善晃作品集 4
</code></pre>
<h2>再生してみる</h2>
<pre class="language-none" tabindex="0"><code class="language-none">❯ wsl mpc listall | grep 三善晃 | wsl mpc add

❯ wsl mpc playlist
田中信昭: 東京混声合唱団 - 混声合唱組曲「嫁ぐ娘に」 - 1. 嫁ぐ日は近づき
田中信昭: 東京混声合唱団 - 混声合唱組曲「嫁ぐ娘に」 - 2. あなたの生まれたのは
田中信昭: 東京混声合唱団 - 混声合唱組曲「嫁ぐ娘に」 - 3. 戦いの日々
田中信昭: 東京混声合唱団 - 混声合唱組曲「嫁ぐ娘に」 - 4. 時間はきらきらと
田中信昭: 東京混声合唱団 - 混声合唱組曲「嫁ぐ娘に」 - 5. かどで
田中信昭: 東京混声合唱団 - 混声合唱組曲「五つの童画」 - 1. 風見鳥
...

❯ wsl mpc play
田中信昭: 東京混声合唱団 - 混声合唱組曲「嫁ぐ娘に」 - 1. 嫁ぐ日は近づき
[playing] #1/64   0:00/3:26 (0%)
volume: n/a   repeat: on    random: on    single: off   consume: off
</code></pre>
<p>問題なく再生できました。よかったですね。</p>
<h2>おわり</h2>
<p>普段はクラシックを聴くんですけど、クラシックのアルバムってアルバム名に作曲者、曲名、アーティストまではいっているので <code>mpc listall</code> から grep
やっていきができてよいってふとおもいました。</p>
</div></article></div><footer>(C) <a href="https://twitter.com/ansanloms">ansanloms</a></footer></body></html>